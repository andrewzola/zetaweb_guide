# Работа с дублями

## Дубли номенклатуры

При работе с большим количеством номенклатуры и взаимодействии с поставщиками (или загрузке номенклатуры из разных источников) встречаются дубли номенклатуры.

{% hint style="info" %}
В системе Zeta Web уникальность номенклатуры проверяется при создании.&#x20;

Если уже существует номенклатура с таким **Очищенным артикулом** и **Брендом**, то при записи будет соответствующее предупреждение.

**Если бренд не указан, то контроль уникальности номенклатуры не действует.**
{% endhint %}

![Пример вывода сообщения о наличии дубля](<../../.gitbook/assets/Image 163 (1).png>)

Обычно Zeta Web внедряется в 1С, в которой уже есть созданная номенклатура и не ведется контроля дублей. Поэтому в базе может быть несколько дублей одной позиции.

{% hint style="info" %}
Самая распространенная причина дублей в запчастях: ****&#x20;

_**использование разных названий одного и того же Бренда.**_
{% endhint %}

![Пример дублей номеналатуры в 1С УТ 10.3.](<../../.gitbook/assets/Image 166.png>)

## Отображение дубля на сайте

![Пример дубля номенклатуры на сайте](<../../.gitbook/assets/image (328) (1).png>)

![Пример дубля номенклатуры на сайте](<../../.gitbook/assets/image (508).png>)

## Работа с дублями

{% hint style="info" %}
Подход к обработке номенклатуры, свертке или удалению дублей зависит от сложности учета и состояния базы 1С. Для больших и старых баз это может оказаться сложной задачей.
{% endhint %}

_Далее рассмотрены несколько основных методов._

### Свертка дублей

В зависимости от конфигурации для поиска и замены дублирующихся элементов используются различные обработки.&#x20;

_Мы рассмотрим на примере штатной обработки 1С Управление торговлей 10.3 **"Поиск и замена дублирующихся элементов справочников"**._

![](<../../.gitbook/assets/Image 120.png>)

![](<../../.gitbook/assets/image (132).png>)

Для обработки номенклатуры:

* выберите: _**Справочник, Реквизит поиска, Режим поиска**_
* задайте _**Настройку уровня сходства слов**_** ** (актуально для поиска дублей по наименованию).

Также можно задать **дополнительные отборы** (например, выбрать только определенную группу номенклатуры).

После выбора параметров нажмите на кнопку **"Найти дубли".**

![](<../../.gitbook/assets/Image 121.png>)

Для управления отображаемыми реквизитами в результатах воспользуйтесь настройкой **Видимые колонки.**

В нашем примере, мы добавили **Бренд** и убрали **Объект**.

_На примере скриншота ниже, мы видим не дубли, а действительно разные номенклатурные позиции._

![п.](<../../.gitbook/assets/Image 124.png>)

Например, ниже, представлен как раз пример дубля. Для того, чтобы его свернуть, нам необходимо одну из позиций "**Указать как правильную**" и выполнить **замену**.

![](<../../.gitbook/assets/Image 127.png>)

После этого в базе останется только правильный элемент и все ссылки на дубли будут заменены на него.

Аналогичную операцию по поиску и замене дублей мы можем проделать и с другими справочниками, например, с брендами.

{% hint style="warning" %}
**Будьте внимательны** при свертке дублей брендов, т.к. переименовав и свернув дубли брендов можно получить дубли номенклатуры по связке "Очищенный артикул + Бренд".
{% endhint %}

{% hint style="info" %}
**Обязательно согласовывайте операции по свертке дублей с квалифицированными 1С-специалистами и руководством.**
{% endhint %}

**Не всегда можно свернуть дубли безболезненно для учетной системы.**

Например, в системе есть дубли номенклатуры:

1. WA940/9, MANN, Фильтр охлаждающей жидкости
2. WA940/9, MANN-FILTER, Фильтр охлаждающей жидкости VOLVO BUS 5000, 7000, 8000, 9000, B6, B7, B9, B10, B12, B13, C10M

![Дубли номенклатуры WA940/9](<../../.gitbook/assets/image (14).png>)

Каждая из этих позиций номенклатуры участвовала в документах, находящихся в закрытых периодах, в которых уже нельзя вносить изменения. В этом случае не получится использовать свертку дублей и в системе остается дубль.

Для решения таких ситуаций разработана методика по [перекроссировке брендов.](https://help-zetaweb.zetasoft.ru/opisanie-i-nastroika/upravlenie-nomenklaturoi/perekrossirovki-brendov)
